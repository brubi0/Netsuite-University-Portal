<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 11: Workflow Action Scripts</title>
    <style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;line-height:1.8;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:40px 20px}.container{max-width:900px;margin:0 auto}.header{background:white;padding:30px 40px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.2);margin-bottom:30px}.header h1{color:#2563eb;font-size:2rem;margin-bottom:10px}.header .meta{color:#6b7280;font-size:0.9rem}.content{background:white;padding:40px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.2)}.content h2{color:#1e40af;margin:35px 0 20px 0;font-size:1.6rem;padding-bottom:10px;border-bottom:3px solid #dbeafe}.content h2:first-of-type{margin-top:0}.content h3{color:#374151;margin:25px 0 15px 0;font-size:1.3rem}.content p{margin:15px 0;color:#374151}.content ul,.content ol{margin:15px 0 15px 30px;color:#374151}.content li{margin:10px 0}.info-box{padding:20px 25px;border-radius:8px;margin:25px 0;border-left:5px solid}.info-box.blue{background:#dbeafe;border-color:#2563eb}.info-box.yellow{background:#fef3c7;border-color:#f59e0b}.info-box.green{background:#dcfce7;border-color:#10b981}.info-box strong{color:#1e40af;display:block;margin-bottom:10px;font-size:1.1rem}code{background:#f3f4f6;padding:3px 8px;border-radius:4px;font-family:monospace;font-size:0.9em;color:#ef4444}pre{background:#1e293b;color:#e2e8f0;padding:25px;border-radius:8px;overflow-x:auto;margin:25px 0;border-left:5px solid #667eea}pre code{background:none;padding:0;color:inherit}.takeaway{background:#f0f9ff;border:2px solid #0ea5e9;border-radius:10px;padding:25px;margin:30px 0}.takeaway h3{color:#0369a1;margin:0 0 15px 0}.takeaway ul{margin:10px 0 10px 25px}.takeaway li{color:#0c4a6e;font-weight:500}.nav-buttons{display:flex;justify-content:space-between;margin-top:40px;gap:20px}.back-btn,.next-btn{padding:14px 28px;border-radius:8px;text-decoration:none;font-weight:600;transition:all 0.3s}.back-btn{background:#6b7280;color:white}.next-btn{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white}table{width:100%;border-collapse:collapse;margin:20px 0}table th,table td{padding:12px;text-align:left;border-bottom:1px solid #e5e7eb}table th{background:#f3f4f6;color:#1e40af;font-weight:600}.toc{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:20px;margin-bottom:30px}.toc h3{color:#1e40af;margin-bottom:15px}.toc ul{list-style:none;margin:0;padding:0}.toc li{margin:8px 0}.toc a{color:#2563eb;text-decoration:none}</style>
</head>
<body>
<div class="container">
<div class="header">
    <h1>Module 11: Workflow Action Scripts</h1>
    <p class="meta">Week 6 ‚Ä¢ NetSuite SuiteScript 2.0 Training ‚Ä¢ ~60 minutes</p>
</div>
<div class="content">

<div class="toc">
    <h3>üìë In This Module</h3>
    <ul>
        <li><a href="#objectives">Learning Objectives</a></li>
        <li><a href="#workflows">1. Understanding Workflows</a></li>
        <li><a href="#elements">2. Workflow Elements</a></li>
        <li><a href="#actions">3. Workflow Action Scripts</a></li>
        <li><a href="#creating">4. Creating Custom Actions</a></li>
        <li><a href="#practice">Practice Exercises</a></li>
    </ul>
</div>

<h2 id="objectives">üéØ Learning Objectives</h2>
<ul>
    <li>Understand SuiteFlow workflow concepts</li>
    <li>Learn workflow elements: states, actions, transitions, triggers</li>
    <li>Create Workflow Action scripts</li>
    <li>Integrate SuiteScript with workflows</li>
</ul>

<h2 id="workflows">1. Understanding Workflows</h2>

<p><strong>SuiteFlow</strong> is NetSuite's visual workflow builder. It automates business processes without code - but Workflow Action Scripts let you extend it with custom logic.</p>

<div class="info-box blue">
    <strong>üí° SuiteFlow vs SuiteScript</strong>
    <ul>
        <li><strong>SuiteFlow</strong>: Point-and-click automation for business processes</li>
        <li><strong>SuiteScript</strong>: Code-based for complex logic and integrations</li>
        <li><strong>Together</strong>: Use workflows for process flow, scripts for custom actions</li>
    </ul>
</div>

<h2 id="elements">2. Workflow Elements</h2>

<table>
    <tr><th>Element</th><th>Purpose</th><th>Example</th></tr>
    <tr><td><strong>State</strong></td><td>Where you are in the process</td><td>Pending Approval, Approved, Rejected</td></tr>
    <tr><td><strong>Action</strong></td><td>What to do</td><td>Send Email, Set Field, Custom Action</td></tr>
    <tr><td><strong>Transition</strong></td><td>How to move between states</td><td>If approved ‚Üí go to Approved state</td></tr>
    <tr><td><strong>Trigger</strong></td><td>When to execute</td><td>On Entry, On Exit, Button Click</td></tr>
</table>

<h3>Built-in Actions</h3>
<ul>
    <li>Set Field Value</li>
    <li>Send Email</li>
    <li>Create Record</li>
    <li>Go To Record</li>
    <li>Lock/Unlock Record</li>
    <li><strong>Custom Action (SuiteScript!)</strong></li>
</ul>

<h2 id="actions">3. Workflow Action Scripts</h2>

<p>When built-in actions aren't enough, create a <strong>Workflow Action Script</strong>:</p>

<pre><code>/**
 * @NApiVersion 2.1
 * @NScriptType WorkflowActionScript
 */
define(['N/record', 'N/email'], function(record, email) {
    
    function onAction(context) {
        // context.newRecord = the record being processed
        // context.oldRecord = previous version (if edit)
        // context.workflowId = workflow internal ID
        // context.type = trigger event type
        
        var rec = context.newRecord;
        var total = rec.getValue('total');
        var customerId = rec.getValue('entity');
        
        // Custom logic here
        if (total > 10000) {
            // Send notification for large orders
            email.send({
                author: -5,
                recipients: 'manager@company.com',
                subject: 'Large Order Alert',
                body: 'Order #' + rec.getValue('tranid') + 
                      ' total: $' + total
            });
        }
        
        // Return a value (can be used in workflow conditions)
        return 'SUCCESS';
    }
    
    return { onAction: onAction };
});</code></pre>

<h2 id="creating">4. Creating Custom Actions</h2>

<h3>Step 1: Create the Script</h3>
<p>Create a WorkflowActionScript file as shown above.</p>

<h3>Step 2: Create Script Record</h3>
<ol>
    <li>Customization ‚Üí Scripting ‚Üí Scripts ‚Üí New</li>
    <li>Upload your file</li>
    <li>Save (no deployment needed for Workflow Actions)</li>
</ol>

<h3>Step 3: Add to Workflow</h3>
<ol>
    <li>Edit your Workflow</li>
    <li>Add an Action to a state</li>
    <li>Choose "Custom Action"</li>
    <li>Select your script</li>
    <li>Configure trigger (Entry, Exit, Button)</li>
</ol>

<h3>Returning Values</h3>
<p>Your script can return values for workflow conditions:</p>

<pre><code>function onAction(context) {
    var total = context.newRecord.getValue('total');
    
    if (total > 10000) {
        return 'LARGE_ORDER';
    } else if (total > 1000) {
        return 'MEDIUM_ORDER';
    } else {
        return 'SMALL_ORDER';
    }
}

// In workflow, add transitions based on return value:
// If return = 'LARGE_ORDER' ‚Üí go to Manager Approval
// If return = 'SMALL_ORDER' ‚Üí go to Auto Approved</code></pre>

<div class="info-box yellow">
    <strong>‚ö†Ô∏è Execution Context</strong>
    <p>Workflow Action Scripts run server-side. They cannot access client-side features like alerts or DOM manipulation.</p>
</div>

<h2 id="practice">üèãÔ∏è Practice Exercises</h2>

<div class="info-box green">
    <strong>Exercise 1: Basic Action</strong>
    <p>Create a Workflow Action Script that logs the record type and ID when triggered.</p>
</div>

<div class="info-box green">
    <strong>Exercise 2: Conditional Logic</strong>
    <p>Create an action that returns different values based on order total (use for workflow branching).</p>
</div>

<div class="takeaway">
    <h3>üéØ Key Takeaways</h3>
    <ul>
        <li>SuiteFlow handles business process automation visually</li>
        <li>Workflow Action Scripts extend workflows with custom code</li>
        <li>Scripts receive context with newRecord, oldRecord, workflowId</li>
        <li>Return values can drive workflow transitions</li>
        <li>No deployment needed - attach directly to workflow states</li>
        <li>Use for logic too complex for built-in actions</li>
    </ul>
</div>

<div class="nav-buttons">
    <a href="week-6-dashboard.html" class="back-btn">‚Üê Back to Week 6</a>
    <a href="../Week-12/Module-12.html" class="next-btn">Next: Module 12 ‚Üí</a>
</div>

</div>
</div>
</body>
</html>
