Using saved searches in conditions-- "this module goes deeper into the configuration of workflow conditions by discussing how saved searches can be used as the criteria by which actions and transitions can be executed." By specifying a saved search as a condition, you can execute actions and transitions on only those records that meet the criteria defined in the saved search, rather than on individual records created from the user interface.

"We will also discuss how saved searches can be used to access a record's sublist data in the context of a running workflow." In this module, we will discuss the following topics. Using saved searches in conditions, and using saved searches to access sublist data. "Upon the completion of this module, you will be able to use saved searches in workflow conditions to execute scheduled workflows, actions, and transitions," and, "Use saved searches to access record sublist data during the execution of actions and transitions."

As we discussed in the previous module to schedule the execution of a workflow you must specify a saved search. However, saved searches can also be used as additional conditions when executing workflows, actions, and transitions during event based processing. The saved search specified must be configured on the same base record type as the workflow. If you specify a saved search and additional conditional logic using the Visual Builder, the criteria specified in the saved search and the criteria defined in the Visual Builder condition must evaluate true in order for the action or transition to execute.

Saved searches can also be used to access another record's sublist data. We'll talk more about this in a little bit. And finally, while it is perfectly reasonable to use saved searches as conditions to initiate workflows and execute actions and transitions, use caution when doing so. Even basic saved search criteria can impact workflow processing performance, particularly when a large number of records are returned in the search results.

For event based workflow initiation, select the saved search from the saved search condition dropdown list in the workflows event definitions section as shown here. The criteria specified in the selected saved search will be evaluated, in addition to any conditions created using the Visual Builder in the condition field. For scheduled workflow initiation select the saved search from the saved search filter dropdown list in the scheduled section of the workflows definition, as shown here. During the next workflow scheduler event the workflow will be initiated on each record returned in the saved search results.

When using saved searches as conditions and action configurations the saved search will be executed based on the server trigger selected from the trigger on dropdown list. The criteria defined in the saved search will be anded together with any other Visual Builder conditions that have been defined. If you do not select a saved search from the saved search dropdown list the action is executed based on any other conditions defined using the Visual Builder. If you select a saved search from the saved search condition dropdown list and no other Visual Builder conditions have been specified the selected saved search becomes the exclusive condition used to evaluate action execution. It's important to note that saved searches used in action conditions configured on client triggers will be ignored.

When using saved searches as conditions in transition configurations the transition will be executed based on the trigger selected from the TRANSITION ON dropdown list, and the criteria specified in the saved search evaluates to true. When setting TRANSITION ON equal to blank, and then selecting a saved search from the saved search condition dropdown list, only the saved search criteria will be used to execute the transition. Like actions, if you do not select a saved search from the saved search condition dropdown list when configuring the transition condition the workflow executes the transition based on any other conditions specified.

SuiteFlow does not currently support direct access to record sublist data when executing actions and transitions. However, saved searches do allow access to most record sublists in NetSuite. When using a saved search to access a record sublist data only the Boolean values of true or false are returned to the workflow during conditioned evaluation. Based on these return values you can then configure additional conditions that further evaluate the return values to perform additional record processing. Sublist action groups and workflow action scripts can be used to access and update a record sublist fields directly via workflow.

Here are some things to keep in mind when using saved searches in action in transition conditions. First, limit the use of saved search conditions whenever possible to event based workflow initiation in action transition execution. This is because saved searches can affect workflow processing performance when processing large numbers of records.

When using a saved search as a condition configure it as early in the workflow execution cycle as possible, such as during initial initiation, rather than on individual workflow actions. This way the saved search is only evaluated once rather than multiple times for each action. "Create appropriate saved search conditions that initiate workflows only on records that require processing by the workflow." This prevents workflow instances from being initiated on records that don't require updating.

And finally, "Do not use saved searches when creating new records at Before Record Submit." The reason for this is because records being created by the Create Record action are not committed to the database until after Record Submit. So there is no way that it would show up in the search results if using a saved search condition. As a best practice, you should always wait until after Record Submit if a saved search condition is processing on a newly created record.

In this demonstration, we will show you how saved searches can be used in action and transition conditions. We will also demonstrate how saved searches can be used to access a related record sublist data to control action execution. First, we'll show you how to create a saved search that will evaluate the performance review records rating code field to determine the selected subordinate's eligibility for a bonus based on their performance review rating code.

We'll create a second saved search that we'll use as a condition on a send email action that accesses the related employee records sublist data, specifically the Human Resources subtab and education sublist to determine the selected employees level of education. Depending on their level of education, they will be eligible for sales management training. And finally, we'll show you how to use these saved searches in action configurations.

Let's begin this demonstration by granting some login access to a couple of our employee users. And this will be important when I go and test these action configurations here shortly. So what I'm going to do is I'm going to come up here to the Setup menu, and I'm going to come all the way down to custom and choose Configure Login Access.

And this is a special suitelet that has been created specifically for our training account and specifically for our course that allows us to quickly generate login access for new users in the system, and associate the proper roles, passwords, so on and so forth. And it's just a really quick nice way to be able to do it without having to go into the individual employee records and modify them manually.

So what I'm going to do is select configure login access here. And the two users that I'm going to be working with exclusively as I go through some of these walkthroughs are going to be John Rittman, who is right down here. Where is he? There he is, John Rittman, and good old Willheim Schueler, which will be towards the bottom of my list here.

So I'm going to select both of those using my Control key to multi select them. And then over here, on the right side where we have our list of roles, I'm going to go ahead and choose a VP roll. And there's one very specific down here called VP WW Sales-HQ. I'm going to go ahead and select that. We'll be using that later as well, but this is what I want to generate.

And I'm simply going to click Generate Employee Access. And when I do that, it's going to generate their login emails right here. I'm just going to go ahead and select those, and I'm just going to go ahead and paste those into just a little notepad file on my desktop so I have them for later, because I'll be using those to log in as those users in future walk through demonstrations.

Now, let's go ahead and create the first saved search in this walkthrough. So to do that, I'm going to come up here to lists, I'm going to come down to search, saved searches, and select new here. And when I do that it's going to ask me what base record type do you want to create the saved search on. And because we're working with performance review records I need to make sure that those match with my workflow, as well as my saved search.

So I'm going to go ahead and choose performance review here, if I can find it-- there it is. And I'm going to go ahead and enter in the following search title. It's going to be just simply employees eligible for a bonus. I'll go ahead and put an ID in here of SDR. That's my prefix for SuiteDreams_perf_review_emp_bonus. I got it right in my history there.

I'm going to go ahead and check public. And that's important because a saved search that's not specified as public will not be accessible to the workflow other than the owner who created the saved search. So definitely keep that in mind if you may have other users with permissions that may prevent them from accessing certain saved searches. If you do want them to execute these workflows make sure that you do, in fact, make them public.

And I'm simply going to enter one little bit of criteria here down on my criteria sublist that simply looks at the rating code field. So I'm simply going to say if rating code is A, so if they get an absolutely fantastic rating code of A then I want those performance review records to be eligible for a bonus. So that's all I'm going to set in this saved search.

I'm simply going to save that. And now I can go ahead and use that in SuiteFlow. So what I'm going to do is I'm going to go to my list of workflows, at customization workflow, workflows. And I'm going to edit our performance review approval workflow right down here. And we're going to add, as I mentioned in the introduction, a sent email action in State 2 Approved right down here that lets the subordinate know that they have earned a bonus based on their excellent performance review.

So let's go ahead and do that. I'm going to select State 2, click New Action. I'm going to choose Send Email. The trigger is going to be entry, that's perfectly fine. So once we come into State 2 go ahead and fire off this email.

And the parameters down here, the sender is going to be whoever the user of the current record is. And whoever the user is, so whoever is entering the record will be who it comes from. And the recipient is going to be whoever the selected subordinate is on the record. So that will be my recipient.

And the subject of this email notification is simply going to be, "Congratulations, you've earned a bonus." And I'll put a little extra text down here in the message body as well, saying, "Your excellent performance this quarter has earned you a bonus in addition to your standard salary increase." Very good, very simple.

And as we did earlier in the course I am going to go ahead and put those two conditions on the email addresses for both the user and my subordinate to make sure that those email addresses are, in fact, populated. So only send this email if the user's email address is not empty and the subordinate's email is not empty. Here we go.

So I've got my Visual Builder condition, but I'm also going to use some additional conditions as we just specified our saved search. I'm going to come down here and choose my Employees Eligible for Bonus saved search that I just created. So again, these will be anded together. So in order for this send email action to execute both the Visual Builder conditions validating the user and subordinate's email must evaluate true, and the saved search condition of Employee Eligible for Bonus, that must return at least one record in the search results in order for this action to execute.

So let's go ahead and save this action. I'll go ahead and click done editing on the workflow itself. And let's simply go in and test this by creating a couple performance review records. So what I'm going to do is I'm going to come up here, go to lists, custom, performance review new.

And I'm going to do a couple of these, just so you can see what happens here. Actually, I don't even need to do a couple. I can just do one. So M04 test number one. I'm going to go ahead and choose John Rittman as my subordinate, since he is in fact a subordinate of me, Larry Nelson. I am his manager.

And I'm going to go ahead and give him an excellent rating code, just so we have something for our saved search to process on. There we go. And I'm simply going to click Save. There we go.

I'm going to go over here to my list of records, and here's the record I just created. Let's just to a quick view on that, and we can check our log files and just verify that things did, in fact, process as you might expect. Oh, actually, I do have to approve the review first. Of course, I set that configured that email action in State 2, so we have to approve the review first. Let me go ahead and do that. There we go.

And now if I look over I can see that it has been approved. I can see that the workflow has transitioned from State 1, waiting for approval, to State 2 , approved. And if I look at the log file for this entry here I should see my send email action that was sent by virtue of the fact that I created a saved search that pulled record 205 of my performance review based on that search criteria.

So I can clearly see that it did, in fact, execute. But I can also go out to my subordinate, in this case John Rittman, if I select his employee record here, if I look down in the Communications subtab on his employee record I can clearly see that the email notification was sent, because I can see it down here in the messages sublist. It says, "Congratulations, you have earned a bonus." And I can look at the details, et cetera.

So that worked fantastic. A very simple example of using a saved search as a action condition. Let's do another example here. And in this series of steps we'll take a slightly different approach to the configuration of our saved search criteria.

So instead of evaluating a performance review record field, such as rating code, we're going to configure another send email action using a saved search. But that saved search is actually going to go out and access our related employee record, and specifically data that exists on the Human Resources tab and the education sublist. And we're going to use that to determine the selected employees level of education. And based on their level of education we're going to make them eligible for some special management training that is being offered.

So let's go ahead and walk through this series of steps. So the first thing I'm going to do is create another saved search. I'm going to come out here to List Search, saved searches new. And once again, this is going to be created on the performance review record type.

I'm going to go ahead and call this particular saved search Employees With Higher Education. And I'll enter an ID following best practices, as you see there. And once again I will check the public option there.

In the Criteria subtab, down here under my filter field, I'm going to go ahead and choose a subordinate field specifically, so Subordinate Custom Fields. And the field that I want to reference is going to be their education. So I'm going to say if the subordinate's education level is any of doctorate or master's degree, I'll go ahead and set that. So you can see it right down here, if subordinate's education level is any of doctorate or master's degree.

Let's go over the results subtab here for a second. All I want to go ahead and return here is I'm going to go ahead and remove quite a bit of this. I want a very lean bit of information. Actually, I'm going to leave it just like that, but I'll just group it by subordinate. There we go, and we'll save it.

So let's go ahead and once again modify one of our subordinates employee records. So I'm going to go ahead and modify John Rittman's employee record by going to lists, employees, employees. And I simply want to make sure that one or both of these gentlemen actually have some higher levels of education on their employee records. Let me go ahead and find John Rittman here.

I'll edit his record. I'll come down here to Human Resources, and then down here to education. And he does not have anything listed, so let me go ahead and add a doctorate for John Rittman. Let's go ahead and save that.

And I will also modify Willheim Schueler's employee record and give him a masters, just so we have some data in our data set. Down to Human Resources here, education, and masters. There we go, excellent.

Now, what I'm going to do is go ahead and create or go ahead and modify our approval workflow. We'll go back and create our records here in just a second. So let me navigate back to our list of workflows.

Once again, I am going to modify and edit the approval workflow. And I'm going to do another send email action in State 2, just as I did before, only this will be based on a completely different set of conditions. So we'll go ahead and choose send email.

The sender will once again be the user of the current record, and the recipient will once again be the selected subordinate on the performance review. And the title of this particular email notification is going to be, "You are invited to participate in SD management training." And I'll go ahead and add a little bit of extra body text in there in the message body. OK, "Our records indicate you possess either a master's degree or doctorate degree, which qualifies you to attend SuiteDreams management training." Very simple.

And once again, I will enter my email conditions. And for the subordinate as well. There we go, and we'll save those conditions. And then once again, we're going to and those conditions together with our employees with higher education saved search.

All right, let me go ahead and save that action configuration. And I'll click done editing on the workflow, and let's create some performance review records. And the first thing I'm going to do is I'm going to come up here and go to list, custom, performance review, new. I'm going to call this M04 test two.

The subordinate I will select, we'll choose John Rittman here. I'll give him a different rating code, just so we don't have the two things going on. I could certainly give him an A and he would have both emails sent. But in this case, we'll just go ahead and test the one saved search for higher education. And I'll go ahead and save that.

Here we go. If I go to my list of records all right, there [AUDIO OUT] go ahead and approve the performance review for Mr. Rittman. And if I look at my workflow history I'm going to focus on that State 2 approved. Once again, look at the log file, and you can clearly see that we did, in fact, have once again that sent email action execute, and the saved search did return performance review record number 206, and the email notification was sent appropriately.

And just as we did before, if I come up here and select Mr. Rittman and scroll down to the Communication subtab in the messages sublist, you can clearly see that he has received an invitation to attend that management training by virtue of our saved search condition. It is now time for you to complete the required hands on exercises associated with the topics discussed in this module. To complete the required exercises, refer to your student workbook. When you have finished, you may continue with the next module. This concludes the using saved searches in conditions module